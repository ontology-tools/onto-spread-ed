import{d as Gn,r as O,z as Kn,l as it,a0 as Qn,P as Jn,w as Tt,o as jn,c as rt,a as ot,e as y,h as q,t as K,J as Zt,Q as qe,a1 as ti,Z as Ve,F as Fe,g as He,v as ie,f as ei,a2 as ni,j as ii,$ as ri}from"./chunks/filter-CdAXK93b.js";import{a as Ft,c as oi}from"./chunks/constants-DL6Hx3V0.js";import"./chunks/index-sLCKmIWG-B5BYNF2N.js";class _e{get nodes(){return Array.from(this._nodes.values())}get edges(){return this._edges}get roots(){return this.nodes.filter(e=>this.predecessors(e.id).length===0)}get leaves(){return this.nodes.filter(e=>this.successors(e.id).length===0)}constructor(e=[],n=[]){this._nodes=new Map,this._edges=[],this._successors=new Map,this._predecessors=new Map;for(const i of e)this.addNode(i);for(const i of n)this.addEdge(i)}outgoingEdges(e){return this._edges.filter(n=>n.source===e)}incomingEdges(e){return this._edges.filter(n=>n.target===e)}node(e){return this._nodes.get(e)}addNode(e){this._nodes.set(e.id,e)}removeNode(e){const n=typeof e=="string"?e:e.id;this._nodes.delete(n),this._edges=this._edges.filter(i=>i.source!==n&&i.target!==n),this._successors.delete(n),this._predecessors.delete(n);for(const[i,r]of this._successors)r.delete(n);for(const[i,r]of this._predecessors)r.delete(n)}removeEdge(e){var n,i;this._edges=this._edges.filter(r=>!(r.source===e.source&&r.target===e.target&&(!e.type||r.type===e.type))),(n=this._successors.get(e.source))==null||n.delete(e.target),(i=this._predecessors.get(e.target))==null||i.delete(e.source)}addEdge(e){this._edges.push(e),this._successors.has(e.source)||this._successors.set(e.source,new Set),this._successors.get(e.source).add(e.target),this._predecessors.has(e.target)||this._predecessors.set(e.target,new Set),this._predecessors.get(e.target).add(e.source)}successors(e){const n=typeof e=="string"?e:e.id;return Array.from(this._successors.get(n)||[]).map(i=>this._nodes.get(i))}predecessors(e){const n=typeof e=="string"?e:e.id;return Array.from(this._predecessors.get(n)||[]).map(i=>this._nodes.get(i))}reachable(e){const n=new Set,i=[e];for(;i.length>0;){const r=i.pop();if(!n.has(r)){n.add(r);const s=this.successors(r);for(const a of s)n.has(a.id)||i.push(a.id)}}return n}backwardReachable(e){const n=new Set,i=[e];for(;i.length>0;){const r=i.pop();if(!n.has(r)){n.add(r);const s=this.predecessors(r);for(const a of s)n.has(a.id)||i.push(a.id)}}return n}clone(){return new _e(this.nodes.map(e=>({...e})),this.edges.map(e=>({...e})))}}var si={value:()=>{}};function gn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new It(n)}function It(t){this._=t}function ai(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}It.prototype=gn.prototype={constructor:It,on:function(t,e){var n=this._,i=ai(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=li(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=Xe(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Xe(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new It(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function li(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Xe(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=si,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var de="http://www.w3.org/1999/xhtml";const Ue={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ue.hasOwnProperty(e)?{space:Ue[e],local:t}:t}function ci(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===de&&e.documentElement.namespaceURI===de?e.createElement(t):e.createElementNS(n,t)}}function ui(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mn(t){var e=Jt(t);return(e.local?ui:ci)(e)}function hi(){}function xe(t){return t==null?hi:function(){return this.querySelector(t)}}function fi(t){typeof t!="function"&&(t=xe(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=new Array(a),u,l,o=0;o<a;++o)(u=s[o])&&(l=t.call(u,u.__data__,o,s))&&("__data__"in u&&(l.__data__=u.__data__),c[o]=l);return new k(i,this._parents)}function vn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function di(){return[]}function wn(t){return t==null?di:function(){return this.querySelectorAll(t)}}function pi(t){return function(){return vn(t.apply(this,arguments))}}function gi(t){typeof t=="function"?t=pi(t):t=wn(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],c=a.length,u,l=0;l<c;++l)(u=a[l])&&(i.push(t.call(u,u.__data__,l,a)),r.push(u));return new k(i,r)}function yn(t){return function(){return this.matches(t)}}function _n(t){return function(e){return e.matches(t)}}var mi=Array.prototype.find;function vi(t){return function(){return mi.call(this.children,t)}}function wi(){return this.firstElementChild}function yi(t){return this.select(t==null?wi:vi(typeof t=="function"?t:_n(t)))}var _i=Array.prototype.filter;function xi(){return Array.from(this.children)}function bi(t){return function(){return _i.call(this.children,t)}}function Si(t){return this.selectAll(t==null?xi:bi(typeof t=="function"?t:_n(t)))}function Ci(t){typeof t!="function"&&(t=yn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&c.push(u);return new k(i,this._parents)}function xn(t){return new Array(t.length)}function Ei(){return new k(this._enter||this._groups.map(xn),this._parents)}function Ht(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ht.prototype={constructor:Ht,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Mi(t){return function(){return t}}function Ni(t,e,n,i,r,s){for(var a=0,c,u=e.length,l=s.length;a<l;++a)(c=e[a])?(c.__data__=s[a],i[a]=c):n[a]=new Ht(t,s[a]);for(;a<u;++a)(c=e[a])&&(r[a]=c)}function Ai(t,e,n,i,r,s,a){var c,u,l=new Map,o=e.length,h=s.length,f=new Array(o),p;for(c=0;c<o;++c)(u=e[c])&&(f[c]=p=a.call(u,u.__data__,c,e)+"",l.has(p)?r[c]=u:l.set(p,u));for(c=0;c<h;++c)p=a.call(t,s[c],c,s)+"",(u=l.get(p))?(i[c]=u,u.__data__=s[c],l.delete(p)):n[c]=new Ht(t,s[c]);for(c=0;c<o;++c)(u=e[c])&&l.get(f[c])===u&&(r[c]=u)}function ki(t){return t.__data__}function zi(t,e){if(!arguments.length)return Array.from(this,ki);var n=e?Ai:Ni,i=this._parents,r=this._groups;typeof t!="function"&&(t=Mi(t));for(var s=r.length,a=new Array(s),c=new Array(s),u=new Array(s),l=0;l<s;++l){var o=i[l],h=r[l],f=h.length,p=Pi(t.call(o,o&&o.__data__,l,i)),m=p.length,g=c[l]=new Array(m),d=a[l]=new Array(m),w=u[l]=new Array(f);n(o,h,g,d,w,p,e);for(var _=0,b=0,S,T;_<m;++_)if(S=g[_]){for(_>=b&&(b=_+1);!(T=d[b])&&++b<m;);S._next=T||null}}return a=new k(a,i),a._enter=c,a._exit=u,a}function Pi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $i(){return new k(this._exit||this._groups.map(xn),this._parents)}function Ti(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Zi(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var l=n[u],o=i[u],h=l.length,f=c[u]=new Array(h),p,m=0;m<h;++m)(p=l[m]||o[m])&&(f[m]=p);for(;u<r;++u)c[u]=n[u];return new k(c,this._parents)}function Li(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Di(t){t||(t=Bi);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],c=a.length,u=r[s]=new Array(c),l,o=0;o<c;++o)(l=a[o])&&(u[o]=l);u.sort(e)}return new k(r,this._parents).order()}function Bi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ii(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ri(){return Array.from(this)}function Oi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function qi(){let t=0;for(const e of this)++t;return t}function Vi(){return!this.node()}function Fi(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,c;s<a;++s)(c=r[s])&&t.call(c,c.__data__,s,r);return this}function Hi(t){return function(){this.removeAttribute(t)}}function Xi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ui(t,e){return function(){this.setAttribute(t,e)}}function Wi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Yi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Gi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ki(t,e){var n=Jt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Xi:Hi:typeof e=="function"?n.local?Gi:Yi:n.local?Wi:Ui)(n,e))}function bn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qi(t){return function(){this.style.removeProperty(t)}}function Ji(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ji(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function tr(t,e,n){return arguments.length>1?this.each((e==null?Qi:typeof e=="function"?ji:Ji)(t,e,n??"")):dt(this.node(),t)}function dt(t,e){return t.style.getPropertyValue(e)||bn(t).getComputedStyle(t,null).getPropertyValue(e)}function er(t){return function(){delete this[t]}}function nr(t,e){return function(){this[t]=e}}function ir(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function rr(t,e){return arguments.length>1?this.each((e==null?er:typeof e=="function"?ir:nr)(t,e)):this.node()[t]}function Sn(t){return t.trim().split(/^|\s+/)}function be(t){return t.classList||new Cn(t)}function Cn(t){this._node=t,this._names=Sn(t.getAttribute("class")||"")}Cn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function En(t,e){for(var n=be(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Mn(t,e){for(var n=be(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function or(t){return function(){En(this,t)}}function sr(t){return function(){Mn(this,t)}}function ar(t,e){return function(){(e.apply(this,arguments)?En:Mn)(this,t)}}function lr(t,e){var n=Sn(t+"");if(arguments.length<2){for(var i=be(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ar:e?or:sr)(n,e))}function cr(){this.textContent=""}function ur(t){return function(){this.textContent=t}}function hr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fr(t){return arguments.length?this.each(t==null?cr:(typeof t=="function"?hr:ur)(t)):this.node().textContent}function dr(){this.innerHTML=""}function pr(t){return function(){this.innerHTML=t}}function gr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mr(t){return arguments.length?this.each(t==null?dr:(typeof t=="function"?gr:pr)(t)):this.node().innerHTML}function vr(){this.nextSibling&&this.parentNode.appendChild(this)}function wr(){return this.each(vr)}function yr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _r(){return this.each(yr)}function xr(t){var e=typeof t=="function"?t:mn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function br(){return null}function Sr(t,e){var n=typeof t=="function"?t:mn(t),i=e==null?br:typeof e=="function"?e:xe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Cr(){var t=this.parentNode;t&&t.removeChild(this)}function Er(){return this.each(Cr)}function Mr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ar(t){return this.select(t?Nr:Mr)}function kr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function zr(t){return function(e){t.call(this,e,this.__data__)}}function Pr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function $r(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function Tr(t,e,n){return function(){var i=this.__on,r,s=zr(e);if(i){for(var a=0,c=i.length;a<c;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Zr(t,e,n){var i=Pr(t+""),r,s=i.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,l=c.length,o;u<l;++u)for(r=0,o=c[u];r<s;++r)if((a=i[r]).type===o.type&&a.name===o.name)return o.value}return}for(c=e?Tr:$r,r=0;r<s;++r)this.each(c(i[r],e,n));return this}function Nn(t,e,n){var i=bn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Lr(t,e){return function(){return Nn(this,t,e)}}function Dr(t,e){return function(){return Nn(this,t,e.apply(this,arguments))}}function Br(t,e){return this.each((typeof e=="function"?Dr:Lr)(t,e))}function*Ir(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var Se=[null];function k(t,e){this._groups=t,this._parents=e}function Nt(){return new k([[document.documentElement]],Se)}function Rr(){return this}k.prototype=Nt.prototype={constructor:k,select:fi,selectAll:gi,selectChild:yi,selectChildren:Si,filter:Ci,data:zi,enter:Ei,exit:$i,join:Ti,merge:Zi,selection:Rr,order:Li,sort:Di,call:Ii,nodes:Ri,node:Oi,size:qi,empty:Vi,each:Fi,attr:Ki,style:tr,property:rr,classed:lr,text:fr,html:mr,raise:wr,lower:_r,append:xr,insert:Sr,remove:Er,clone:Ar,datum:kr,on:Zr,dispatch:Br,[Symbol.iterator]:Ir};function V(t){return typeof t=="string"?new k([[document.querySelector(t)]],[document.documentElement]):new k([[t]],Se)}function Xt(t){return typeof t=="string"?new k([document.querySelectorAll(t)],[document.documentElement]):new k([vn(t)],Se)}function Ce(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function An(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function At(){}var bt=.7,Ut=1/bt,ft="\\s*([+-]?\\d+)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Y="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,qr=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),Vr=new RegExp(`^rgb\\(${Y},${Y},${Y}\\)$`),Fr=new RegExp(`^rgba\\(${ft},${ft},${ft},${St}\\)$`),Hr=new RegExp(`^rgba\\(${Y},${Y},${Y},${St}\\)$`),Xr=new RegExp(`^hsl\\(${St},${Y},${Y}\\)$`),Ur=new RegExp(`^hsla\\(${St},${Y},${Y},${St}\\)$`),We={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ce(At,Ct,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ye,formatHex:Ye,formatHex8:Wr,formatHsl:Yr,formatRgb:Ge,toString:Ge});function Ye(){return this.rgb().formatHex()}function Wr(){return this.rgb().formatHex8()}function Yr(){return kn(this).formatHsl()}function Ge(){return this.rgb().formatRgb()}function Ct(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ke(e):n===3?new $(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qr.exec(t))?new $(e[1],e[2],e[3],1):(e=Vr.exec(t))?new $(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fr.exec(t))?Lt(e[1],e[2],e[3],e[4]):(e=Hr.exec(t))?Lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xr.exec(t))?je(e[1],e[2]/100,e[3]/100,1):(e=Ur.exec(t))?je(e[1],e[2]/100,e[3]/100,e[4]):We.hasOwnProperty(t)?Ke(We[t]):t==="transparent"?new $(NaN,NaN,NaN,0):null}function Ke(t){return new $(t>>16&255,t>>8&255,t&255,1)}function Lt(t,e,n,i){return i<=0&&(t=e=n=NaN),new $(t,e,n,i)}function Gr(t){return t instanceof At||(t=Ct(t)),t?(t=t.rgb(),new $(t.r,t.g,t.b,t.opacity)):new $}function pe(t,e,n,i){return arguments.length===1?Gr(t):new $(t,e,n,i??1)}function $(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ce($,pe,An(At,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $(lt(this.r),lt(this.g),lt(this.b),Wt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qe,formatHex:Qe,formatHex8:Kr,formatRgb:Je,toString:Je}));function Qe(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function Kr(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function Je(){const t=Wt(this.opacity);return`${t===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${t===1?")":`, ${t})`}`}function Wt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function at(t){return t=lt(t),(t<16?"0":"")+t.toString(16)}function je(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new F(t,e,n,i)}function kn(t){if(t instanceof F)return new F(t.h,t.s,t.l,t.opacity);if(t instanceof At||(t=Ct(t)),!t)return new F;if(t instanceof F)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,c=s-r,u=(s+r)/2;return c?(e===s?a=(n-i)/c+(n<i)*6:n===s?a=(i-e)/c+2:a=(e-n)/c+4,c/=u<.5?s+r:2-s-r,a*=60):c=u>0&&u<1?0:a,new F(a,c,u,t.opacity)}function Qr(t,e,n,i){return arguments.length===1?kn(t):new F(t,e,n,i??1)}function F(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ce(F,Qr,An(At,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new F(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new F(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new $(re(t>=240?t-240:t+120,r,i),re(t,r,i),re(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new F(tn(this.h),Dt(this.s),Dt(this.l),Wt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wt(this.opacity);return`${t===1?"hsl(":"hsla("}${tn(this.h)}, ${Dt(this.s)*100}%, ${Dt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tn(t){return t=(t||0)%360,t<0?t+360:t}function Dt(t){return Math.max(0,Math.min(1,t||0))}function re(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zn=t=>()=>t;function Jr(t,e){return function(n){return t+n*e}}function jr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function to(t){return(t=+t)==1?Pn:function(e,n){return n-e?jr(e,n,t):zn(isNaN(e)?n:e)}}function Pn(t,e){var n=e-t;return n?Jr(t,n):zn(isNaN(t)?e:t)}const en=(function t(e){var n=to(e);function i(r,s){var a=n((r=pe(r)).r,(s=pe(s)).r),c=n(r.g,s.g),u=n(r.b,s.b),l=Pn(r.opacity,s.opacity);return function(o){return r.r=a(o),r.g=c(o),r.b=u(o),r.opacity=l(o),r+""}}return i.gamma=t,i})(1);function st(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ge=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oe=new RegExp(ge.source,"g");function eo(t){return function(){return t}}function no(t){return function(e){return t(e)+""}}function io(t,e){var n=ge.lastIndex=oe.lastIndex=0,i,r,s,a=-1,c=[],u=[];for(t=t+"",e=e+"";(i=ge.exec(t))&&(r=oe.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),c[a]?c[a]+=s:c[++a]=s),(i=i[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,u.push({i:a,x:st(i,r)})),n=oe.lastIndex;return n<e.length&&(s=e.slice(n),c[a]?c[a]+=s:c[++a]=s),c.length<2?u[0]?no(u[0].x):eo(e):(e=u.length,function(l){for(var o=0,h;o<e;++o)c[(h=u[o]).i]=h.x(l);return c.join("")})}var nn=180/Math.PI,me={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $n(t,e,n,i,r,s){var a,c,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,u/=c),t*i<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*nn,skewX:Math.atan(u)*nn,scaleX:a,scaleY:c}}var Bt;function ro(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?me:$n(e.a,e.b,e.c,e.d,e.e,e.f)}function oo(t){return t==null||(Bt||(Bt=document.createElementNS("http://www.w3.org/2000/svg","g")),Bt.setAttribute("transform",t),!(t=Bt.transform.baseVal.consolidate()))?me:(t=t.matrix,$n(t.a,t.b,t.c,t.d,t.e,t.f))}function Tn(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function s(l,o,h,f,p,m){if(l!==h||o!==f){var g=p.push("translate(",null,e,null,n);m.push({i:g-4,x:st(l,h)},{i:g-2,x:st(o,f)})}else(h||f)&&p.push("translate("+h+e+f+n)}function a(l,o,h,f){l!==o?(l-o>180?o+=360:o-l>180&&(l+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:st(l,o)})):o&&h.push(r(h)+"rotate("+o+i)}function c(l,o,h,f){l!==o?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:st(l,o)}):o&&h.push(r(h)+"skewX("+o+i)}function u(l,o,h,f,p,m){if(l!==h||o!==f){var g=p.push(r(p)+"scale(",null,",",null,")");m.push({i:g-4,x:st(l,h)},{i:g-2,x:st(o,f)})}else(h!==1||f!==1)&&p.push(r(p)+"scale("+h+","+f+")")}return function(l,o){var h=[],f=[];return l=t(l),o=t(o),s(l.translateX,l.translateY,o.translateX,o.translateY,h,f),a(l.rotate,o.rotate,h,f),c(l.skewX,o.skewX,h,f),u(l.scaleX,l.scaleY,o.scaleX,o.scaleY,h,f),l=o=null,function(p){for(var m=-1,g=f.length,d;++m<g;)h[(d=f[m]).i]=d.x(p);return h.join("")}}}var so=Tn(ro,"px, ","px)","deg)"),ao=Tn(oo,", ",")",")"),pt=0,yt=0,vt=0,Zn=1e3,Yt,_t,Gt=0,ct=0,jt=0,Et=typeof performance=="object"&&performance.now?performance:Date,Ln=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ee(){return ct||(Ln(lo),ct=Et.now()+jt)}function lo(){ct=0}function Kt(){this._call=this._time=this._next=null}Kt.prototype=Dn.prototype={constructor:Kt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ee():+n)+(e==null?0:+e),!this._next&&_t!==this&&(_t?_t._next=this:Yt=this,_t=this),this._call=t,this._time=n,ve()},stop:function(){this._call&&(this._call=null,this._time=1/0,ve())}};function Dn(t,e,n){var i=new Kt;return i.restart(t,e,n),i}function co(){Ee(),++pt;for(var t=Yt,e;t;)(e=ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pt}function rn(){ct=(Gt=Et.now())+jt,pt=yt=0;try{co()}finally{pt=0,ho(),ct=0}}function uo(){var t=Et.now(),e=t-Gt;e>Zn&&(jt-=e,Gt=t)}function ho(){for(var t,e=Yt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yt=n);_t=t,ve(i)}function ve(t){if(!pt){yt&&(yt=clearTimeout(yt));var e=t-ct;e>24?(t<1/0&&(yt=setTimeout(rn,t-Et.now()-jt)),vt&&(vt=clearInterval(vt))):(vt||(Gt=Et.now(),vt=setInterval(uo,Zn)),pt=1,Ln(rn))}}function on(t,e,n){var i=new Kt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var fo=gn("start","end","cancel","interrupt"),po=[],Bn=0,sn=1,we=2,Rt=3,an=4,ye=5,Ot=6;function te(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;go(t,n,{name:e,index:i,group:r,on:fo,tween:po,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Bn})}function Me(t,e){var n=H(t,e);if(n.state>Bn)throw new Error("too late; already scheduled");return n}function G(t,e){var n=H(t,e);if(n.state>Rt)throw new Error("too late; already running");return n}function H(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function go(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Dn(s,0,n.time);function s(l){n.state=sn,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var o,h,f,p;if(n.state!==sn)return u();for(o in i)if(p=i[o],p.name===n.name){if(p.state===Rt)return on(a);p.state===an?(p.state=Ot,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[o]):+o<e&&(p.state=Ot,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[o])}if(on(function(){n.state===Rt&&(n.state=an,n.timer.restart(c,n.delay,n.time),c(l))}),n.state=we,n.on.call("start",t,t.__data__,n.index,n.group),n.state===we){for(n.state=Rt,r=new Array(f=n.tween.length),o=0,h=-1;o<f;++o)(p=n.tween[o].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function c(l){for(var o=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ye,1),h=-1,f=r.length;++h<f;)r[h].call(t,o);n.state===ye&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Ot,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function mo(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>we&&i.state<ye,i.state=Ot,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function vo(t){return this.each(function(){mo(this,t)})}function wo(t,e){var n,i;return function(){var r=G(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,c=i.length;a<c;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function yo(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=G(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var c={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=c;break}u===l&&r.push(c)}s.tween=r}}function _o(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=H(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?wo:yo)(n,t,e))}function Ne(t,e,n){var i=t._id;return t.each(function(){var r=G(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return H(r,i).value[e]}}function In(t,e){var n;return(typeof e=="number"?st:e instanceof Ct?en:(n=Ct(e))?(e=n,en):io)(t,e)}function xo(t){return function(){this.removeAttribute(t)}}function bo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function So(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function Co(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function Eo(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function Mo(t,e,n){var i,r,s;return function(){var a,c=n(this),u;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=c+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c)))}}function No(t,e){var n=Jt(t),i=n==="transform"?ao:In;return this.attrTween(t,typeof e=="function"?(n.local?Mo:Eo)(n,i,Ne(this,"attr."+t,e)):e==null?(n.local?bo:xo)(n):(n.local?Co:So)(n,i,e))}function Ao(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ko(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function zo(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&ko(t,s)),n}return r._value=e,r}function Po(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Ao(t,s)),n}return r._value=e,r}function $o(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Jt(t);return this.tween(n,(i.local?zo:Po)(i,e))}function To(t,e){return function(){Me(this,t).delay=+e.apply(this,arguments)}}function Zo(t,e){return e=+e,function(){Me(this,t).delay=e}}function Lo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?To:Zo)(e,t)):H(this.node(),e).delay}function Do(t,e){return function(){G(this,t).duration=+e.apply(this,arguments)}}function Bo(t,e){return e=+e,function(){G(this,t).duration=e}}function Io(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Do:Bo)(e,t)):H(this.node(),e).duration}function Ro(t,e){if(typeof e!="function")throw new Error;return function(){G(this,t).ease=e}}function Oo(t){var e=this._id;return arguments.length?this.each(Ro(e,t)):H(this.node(),e).ease}function qo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;G(this,t).ease=n}}function Vo(t){if(typeof t!="function")throw new Error;return this.each(qo(this._id,t))}function Fo(t){typeof t!="function"&&(t=yn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,c=i[r]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&c.push(u);return new J(i,this._parents,this._name,this._id)}function Ho(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),c=0;c<s;++c)for(var u=e[c],l=n[c],o=u.length,h=a[c]=new Array(o),f,p=0;p<o;++p)(f=u[p]||l[p])&&(h[p]=f);for(;c<i;++c)a[c]=e[c];return new J(a,this._parents,this._name,this._id)}function Xo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Uo(t,e,n){var i,r,s=Xo(e)?Me:G;return function(){var a=s(this,t),c=a.on;c!==i&&(r=(i=c).copy()).on(e,n),a.on=r}}function Wo(t,e){var n=this._id;return arguments.length<2?H(this.node(),n).on.on(t):this.each(Uo(n,t,e))}function Yo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Go(){return this.on("end.remove",Yo(this._id))}function Ko(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xe(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,l=s[a]=new Array(u),o,h,f=0;f<u;++f)(o=c[f])&&(h=t.call(o,o.__data__,f,c))&&("__data__"in o&&(h.__data__=o.__data__),l[f]=h,te(l[f],e,n,f,l,H(o,n)));return new J(s,this._parents,e,n)}function Qo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wn(t));for(var i=this._groups,r=i.length,s=[],a=[],c=0;c<r;++c)for(var u=i[c],l=u.length,o,h=0;h<l;++h)if(o=u[h]){for(var f=t.call(o,o.__data__,h,u),p,m=H(o,n),g=0,d=f.length;g<d;++g)(p=f[g])&&te(p,e,n,g,f,m);s.push(f),a.push(o)}return new J(s,a,e,n)}var Jo=Nt.prototype.constructor;function jo(){return new Jo(this._groups,this._parents)}function ts(t,e){var n,i,r;return function(){var s=dt(this,t),a=(this.style.removeProperty(t),dt(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function Rn(t){return function(){this.style.removeProperty(t)}}function es(t,e,n){var i,r=n+"",s;return function(){var a=dt(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function ns(t,e,n){var i,r,s;return function(){var a=dt(this,t),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(t),dt(this,t))),a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,c))}}function is(t,e){var n,i,r,s="style."+e,a="end."+s,c;return function(){var u=G(this,t),l=u.on,o=u.value[s]==null?c||(c=Rn(e)):void 0;(l!==n||r!==o)&&(i=(n=l).copy()).on(a,r=o),u.on=i}}function rs(t,e,n){var i=(t+="")=="transform"?so:In;return e==null?this.styleTween(t,ts(t,i)).on("end.style."+t,Rn(t)):typeof e=="function"?this.styleTween(t,ns(t,i,Ne(this,"style."+t,e))).each(is(this._id,t)):this.styleTween(t,es(t,i,e),n).on("end.style."+t,null)}function os(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function ss(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&os(t,a,n)),i}return s._value=e,s}function as(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,ss(t,e,n??""))}function ls(t){return function(){this.textContent=t}}function cs(t){return function(){var e=t(this);this.textContent=e??""}}function us(t){return this.tween("text",typeof t=="function"?cs(Ne(this,"text",t)):ls(t==null?"":t+""))}function hs(t){return function(e){this.textContent=t.call(this,e)}}function fs(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&hs(r)),e}return i._value=t,i}function ds(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fs(t))}function ps(){for(var t=this._name,e=this._id,n=On(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,l=0;l<c;++l)if(u=a[l]){var o=H(u,e);te(u,t,n,l,a,{time:o.time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease})}return new J(i,this._parents,t,n)}function gs(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var c={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var l=G(this,i),o=l.on;o!==t&&(e=(t=o).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),l.on=e}),r===0&&s()})}var ms=0;function J(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function On(){return++ms}var Q=Nt.prototype;J.prototype={constructor:J,select:Ko,selectAll:Qo,selectChild:Q.selectChild,selectChildren:Q.selectChildren,filter:Fo,merge:Ho,selection:jo,transition:ps,call:Q.call,nodes:Q.nodes,node:Q.node,size:Q.size,empty:Q.empty,each:Q.each,on:Wo,attr:No,attrTween:$o,style:rs,styleTween:as,text:us,textTween:ds,remove:Go,tween:_o,delay:Lo,duration:Io,ease:Oo,easeVarying:Vo,end:gs,[Symbol.iterator]:Q[Symbol.iterator]};function vs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ws={time:null,delay:0,duration:250,ease:vs};function ys(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function _s(t){var e,n;t instanceof J?(e=t._id,t=t._name):(e=On(),(n=ws).time=Ee(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],c=a.length,u,l=0;l<c;++l)(u=a[l])&&te(u,t,e,l,a,n||ys(u,e));return new J(i,this._parents,t,e)}Nt.prototype.interrupt=vo;Nt.prototype.transition=_s;function xs(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function bs(){return this.eachAfter(xs)}function Ss(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function Cs(t,e){for(var n=this,i=[n],r,s,a=-1;n=i.pop();)if(t.call(e,n,++a,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Es(t,e){for(var n=this,i=[n],r=[],s,a,c,u=-1;n=i.pop();)if(r.push(n),s=n.children)for(a=0,c=s.length;a<c;++a)i.push(s[a]);for(;n=r.pop();)t.call(e,n,++u,this);return this}function Ms(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function Ns(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function As(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ks(t){for(var e=this,n=zs(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function zs(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function Ps(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function $s(){return Array.from(this)}function Ts(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Zs(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Ls(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function Ae(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Is)):e===void 0&&(e=Bs);for(var n=new Mt(t),i,r=[n],s,a,c,u;i=r.pop();)if((a=e(i.data))&&(u=(a=Array.from(a)).length))for(i.children=a,c=u-1;c>=0;--c)r.push(s=a[c]=new Mt(a[c])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(Os)}function Ds(){return Ae(this).eachBefore(Rs)}function Bs(t){return t.children}function Is(t){return Array.isArray(t)?t[1]:null}function Rs(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Os(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Mt(t){this.data=t,this.depth=this.height=0,this.parent=null}Mt.prototype=Ae.prototype={constructor:Mt,count:bs,each:Ss,eachAfter:Es,eachBefore:Cs,find:Ms,sum:Ns,sort:As,path:ks,ancestors:Ps,descendants:$s,leaves:Ts,links:Zs,copy:Ds,[Symbol.iterator]:Ls};function qs(t,e){return t.parent===e.parent?1:2}function se(t){var e=t.children;return e?e[0]:t.t}function ae(t){var e=t.children;return e?e[e.length-1]:t.t}function Vs(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Fs(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Hs(t,e,n){return t.a.parent===e.parent?t.a:n}function qt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}qt.prototype=Object.create(Mt.prototype);function Xs(t){for(var e=new qt(t,0),n,i=[e],r,s,a,c;n=i.pop();)if(s=n._.children)for(n.children=new Array(c=s.length),a=c-1;a>=0;--a)i.push(r=n.children[a]=new qt(s[a],a)),r.parent=n;return(e.parent=new qt(null,0)).children=[e],e}function Us(){var t=qs,e=1,n=1,i=null;function r(l){var o=Xs(l);if(o.eachAfter(s),o.parent.m=-o.z,o.eachBefore(a),i)l.eachBefore(u);else{var h=l,f=l,p=l;l.eachBefore(function(_){_.x<h.x&&(h=_),_.x>f.x&&(f=_),_.depth>p.depth&&(p=_)});var m=h===f?1:t(h,f)/2,g=m-h.x,d=e/(f.x+m+g),w=n/(p.depth||1);l.eachBefore(function(_){_.x=(_.x+g)*d,_.y=_.depth*w})}return l}function s(l){var o=l.children,h=l.parent.children,f=l.i?h[l.i-1]:null;if(o){Fs(l);var p=(o[0].z+o[o.length-1].z)/2;f?(l.z=f.z+t(l._,f._),l.m=l.z-p):l.z=p}else f&&(l.z=f.z+t(l._,f._));l.parent.A=c(l,f,l.parent.A||h[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function c(l,o,h){if(o){for(var f=l,p=l,m=o,g=f.parent.children[0],d=f.m,w=p.m,_=m.m,b=g.m,S;m=ae(m),f=se(f),m&&f;)g=se(g),p=ae(p),p.a=l,S=m.z+_-f.z-d+t(m._,f._),S>0&&(Vs(Hs(m,l,h),l,S),d+=S,w+=S),_+=m.m,d+=f.m,b+=g.m,w+=p.m;m&&!ae(p)&&(p.t=m,p.m+=_-w),f&&!se(g)&&(g.t=f,g.m+=d-b,h=l)}return h}function u(l){l.x*=e,l.y=l.depth*n}return r.separation=function(l){return arguments.length?(t=l,r):t},r.size=function(l){return arguments.length?(i=!1,e=+l[0],n=+l[1],r):i?null:[e,n]},r.nodeSize=function(l){return arguments.length?(i=!0,e=+l[0],n=+l[1],r):i?[e,n]:null},r}function xt(t,e,n){this.k=t,this.x=e,this.y=n}xt.prototype={constructor:xt,scale:function(t){return t===1?this:new xt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xt.prototype;function Ws(t,e){const n=new Set;for(const c of t.nodes){const u=c.curationStatus,l=c.visualDepth,o=c.source==="current",h=l<0,f=l>0,p=l===0,m=e.curationFilter.includes(u),g=l<=(e.numChildLevels??1/0),d=o||p||h&&e.showParentsFromOtherSheets||f&&e.showChildrenFromOtherSheets;m&&g&&d&&n.add(c.id)}const i=t.nodes.filter(c=>n.has(c.id)),r=t.edges.filter(c=>n.has(c.source)&&n.has(c.target)),s=r.filter(c=>c.type==="subclass_of"),a=r.filter(c=>c.type!=="subclass_of");return{nodes:i,hierarchyEdges:s,relationEdges:a}}function Ys(t,e){const n=new Map,i=new Map;for(const u of e)n.has(u.source)||n.set(u.source,[]),n.get(u.source).push(u.target),i.set(u.target,u.source);const r=t.filter(u=>!i.has(u.id)),s=new Map;for(const u of t)s.set(u.id,u);function a(u){const l=s.get(u);if(!l)return null;const o=[],h=n.get(u)??[];for(const f of h){const p=a(f);p&&o.push(p)}return{id:l.id,label:l.label,ose_curation:l.curationStatus,ose_origin:l.origin,ose_source:l.source,ose_selected:l.isSelected,children:o}}const c=[];for(const u of r){const l=a(u.id);l&&c.push(l)}return c}function Gs(t,e){const n=t.trim().toLowerCase();if(Xt(".node").classed("search-match",!1).classed("search-current",!1),!n)return[];const i=[];return Xt(".node").each(function(){const r=V(this),s=r.attr("data-node-id"),a=e[s]||"",c=(s==null?void 0:s.replace("_",":"))||"";(a.toLowerCase().includes(n)||c.toLowerCase().includes(n))&&(i.push(s),r.classed("search-match",!0))}),i}function Ks(t){Xt(".node").classed("search-current",!1),V(`.node[data-node-id="${t}"]`).classed("search-current",!0)}function Qs(){Xt(".node").classed("search-match",!1).classed("search-current",!1)}function Js(t,e,n){const i=document.querySelector(`.node[data-node-id="${t}"]`);if(!i)return console.warn("Node element not found:",t),!1;const r=e.querySelector("svg");if(!r)return!1;const s=r.querySelector(".graph-container");if(!s)return!1;const a=i.getBBox();let c=a.x+a.width/2,u=a.y+a.height/2,l=i;for(;l&&l!==s;){const m=l.getAttribute("transform");if(m){const g=m.match(/translate\(([^,]+),([^)]+)\)/);g&&(c+=parseFloat(g[1]),u+=parseFloat(g[2]))}if(l=l.parentElement,!l||l===r)break}const o=n.getSizes().realZoom,h=n.getSizes(),f=h.width/2-c*o,p=h.height/2-u*o;return n.pan({x:f,y:p}),!0}function js(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var le,ln;function ta(){return ln||(ln=1,le=(function(){var t="",e,n,i,r=[],s={passive:!0},a={passive:!1};window.addEventListener?(e="addEventListener",n="removeEventListener"):(e="attachEvent",n="detachEvent",t="on"),i="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function c(m,g){var d=function(w){!w&&(w=window.event);var _={originalEvent:w,target:w.target||w.srcElement,type:"wheel",deltaMode:w.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){w.preventDefault?w.preventDefault():w.returnValue=!1}};return i=="mousewheel"?(_.deltaY=-.025*w.wheelDelta,w.wheelDeltaX&&(_.deltaX=-.025*w.wheelDeltaX)):_.deltaY=w.detail,g(_)};return r.push({element:m,fn:d}),d}function u(m){for(var g=0;g<r.length;g++)if(r[g].element===m)return r[g].fn;return function(){}}function l(m){for(var g=0;g<r.length;g++)if(r[g].element===m)return r.splice(g,1)}function o(m,g,d,w){var _;i==="wheel"?_=d:_=c(m,d),m[e](t+g,_,w?s:a)}function h(m,g,d,w){var _;i==="wheel"?_=d:_=u(m),m[n](t+g,_,w?s:a),l(m)}function f(m,g,d){o(m,i,g,d),i=="DOMMouseScroll"&&o(m,"MozMousePixelScroll",g,d)}function p(m,g,d){h(m,i,g,d),i=="DOMMouseScroll"&&h(m,"MozMousePixelScroll",g,d)}return{on:f,off:p}})()),le}var ce,cn;function ke(){if(cn)return ce;cn=1,ce={extend:function(e,n){e=e||{};for(var i in n)this.isObject(n[i])?e[i]=this.extend(e[i],n[i]):e[i]=n[i];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var n,i;if(this.isElement(e))n=e;else if(typeof e=="string"||e instanceof String){if(n=document.querySelector(e),!n)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(n.tagName.toLowerCase()==="svg")i=n;else if(n.tagName.toLowerCase()==="object")i=n.contentDocument.documentElement;else if(n.tagName.toLowerCase()==="embed")i=n.getSVGDocument().documentElement;else throw n.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return i},proxy:function(e,n){return function(){return e.apply(n,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,n){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var i=n.getBoundingClientRect();e.clientX=e.touches[0].pageX-i.left,e.clientY=e.touches[0].pageY-i.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},isDblClick:function(e,n){if(e.detail===2)return!0;if(n!=null){var i=e.timeStamp-n.timeStamp,r=Math.sqrt(Math.pow(e.clientX-n.clientX,2)+Math.pow(e.clientY-n.clientY,2));return i<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,n,i){var r=this,s,a,c,u=null,l=0;i||(i={});var o=function(){l=i.leading===!1?0:r.now(),u=null,c=e.apply(s,a),u||(s=a=null)};return function(){var h=r.now();!l&&i.leading===!1&&(l=h);var f=n-(h-l);return s=this,a=arguments,f<=0||f>n?(clearTimeout(u),u=null,l=h,c=e.apply(s,a),u||(s=a=null)):!u&&i.trailing!==!1&&(u=setTimeout(o,f)),c}},createRequestAnimationFrame:function(e){var n=null;return e!=="auto"&&e<60&&e>1&&(n=Math.floor(1e3/e)),n===null?window.requestAnimationFrame||t(33):t(n)}};function t(e){return function(n){window.setTimeout(n,e)}}return ce}var wt,un;function ze(){if(un)return wt;un=1;var t=ke(),e="unknown";return document.documentMode&&(e="ie"),wt={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(n){if(n.clientWidth&&n.clientHeight)return{width:n.clientWidth,height:n.clientHeight};if(n.getBoundingClientRect())return n.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(n,i){var r=null;if(t.isElement(i)?r=i:r=n.querySelector(i),!r){var s=Array.prototype.slice.call(n.childNodes||n.children).filter(function(o){return o.nodeName!=="defs"&&o.nodeName!=="#text"});s.length===1&&s[0].nodeName==="g"&&s[0].getAttribute("transform")===null&&(r=s[0])}if(!r){var a="viewport-"+new Date().toISOString().replace(/\D/g,"");r=document.createElementNS(this.svgNS,"g"),r.setAttribute("id",a);var c=n.childNodes||n.children;if(c&&c.length>0)for(var u=c.length;u>0;u--)c[c.length-u].nodeName!=="defs"&&r.appendChild(c[c.length-u]);n.appendChild(r)}var l=[];return r.getAttribute("class")&&(l=r.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),r.setAttribute("class",l.join(" "))),r},setupSvgAttributes:function(n){if(n.setAttribute("xmlns",this.svgNS),n.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),n.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),n.parentNode!==null){var i=n.getAttribute("style")||"";i.toLowerCase().indexOf("overflow")===-1&&n.setAttribute("style","overflow: hidden; "+i)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:t.throttle(function(){for(var n=document.querySelectorAll("defs"),i=n.length,r=0;r<i;r++){var s=n[r];s.parentNode.insertBefore(s,s)}},wt?wt.internetExplorerRedisplayInterval:null),setCTM:function(n,i,r){var s=this,a="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";n.setAttributeNS(null,"transform",a),"transform"in n.style?n.style.transform=a:"-ms-transform"in n.style?n.style["-ms-transform"]=a:"-webkit-transform"in n.style&&(n.style["-webkit-transform"]=a),e==="ie"&&r&&(r.parentNode.insertBefore(r,r),window.setTimeout(function(){s.refreshDefsGlobal()},s.internetExplorerRedisplayInterval))},getEventPoint:function(n,i){var r=i.createSVGPoint();return t.mouseAndTouchNormalize(n,i),r.x=n.clientX,r.y=n.clientY,r},getSvgCenterPoint:function(n,i,r){return this.createSVGPoint(n,i/2,r/2)},createSVGPoint:function(n,i,r){var s=n.createSVGPoint();return s.x=i,s.y=r,s}},wt}var ue,hn;function ea(){if(hn)return ue;hn=1;var t=ze();return ue={enable:function(e){var n=e.svg.querySelector("defs");n||(n=document.createElementNS(t.svgNS,"defs"),e.svg.appendChild(n));var i=n.querySelector("style#svg-pan-zoom-controls-styles");if(!i){var r=document.createElementNS(t.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",n.appendChild(r)}var s=document.createElementNS(t.svgNS,"g");s.setAttribute("id","svg-pan-zoom-controls"),s.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),s.setAttribute("class","svg-pan-zoom-control"),s.appendChild(this._createZoomIn(e)),s.appendChild(this._createZoomReset(e)),s.appendChild(this._createZoomOut(e)),e.svg.appendChild(s),e.controlIcons=s},_createZoomIn:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-in"),n.setAttribute("transform","translate(30.5 5) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var i=document.createElementNS(t.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(i);var r=document.createElementNS(t.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r),n},_createZoomReset:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),n.setAttribute("transform","translate(5 35) scale(0.4)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().reset()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var i=document.createElementNS(t.svgNS,"rect");i.setAttribute("x","2"),i.setAttribute("y","2"),i.setAttribute("width","182"),i.setAttribute("height","58"),i.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(i);var r=document.createElementNS(t.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r);var s=document.createElementNS(t.svgNS,"path");return s.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),s.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(s),n},_createZoomOut:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-out"),n.setAttribute("transform","translate(30.5 70) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var i=document.createElementNS(t.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(i);var r=document.createElementNS(t.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r),n},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},ue}var he,fn;function na(){if(fn)return he;fn=1;var t=ze(),e=ke(),n=function(i,r){this.init(i,r)};return n.prototype.init=function(i,r){this.viewport=i,this.options=r,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=e.proxy(this.updateCTM,this),this.requestAnimationFrame=e.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var s=this.processCTM();this.setCTM(s),this.updateCTM()},n.prototype.cacheViewBox=function(){var i=this.options.svg.getAttribute("viewBox");if(i){var r=i.split(/[\s\,]/).filter(function(a){return a}).map(parseFloat);this.viewBox.x=r[0],this.viewBox.y=r[1],this.viewBox.width=r[2],this.viewBox.height=r[3];var s=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=s,this.activeState.x=(this.options.width-this.viewBox.width*s)/2,this.activeState.y=(this.options.height-this.viewBox.height*s)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},n.prototype.simpleViewBoxCache=function(){var i=this.viewport.getBBox();this.viewBox.x=i.x,this.viewBox.y=i.y,this.viewBox.width=i.width,this.viewBox.height=i.height},n.prototype.getViewBox=function(){return e.extend({},this.viewBox)},n.prototype.processCTM=function(){var i=this.getCTM();if(this.options.fit||this.options.contain){var r;this.options.fit?r=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):r=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),i.a=r,i.d=r,i.e=-this.viewBox.x*r,i.f=-this.viewBox.y*r}if(this.options.center){var s=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*i.a)*.5,a=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*i.a)*.5;i.e=s,i.f=a}return this.originalState.zoom=i.a,this.originalState.x=i.e,this.originalState.y=i.f,i},n.prototype.getOriginalState=function(){return e.extend({},this.originalState)},n.prototype.getState=function(){return e.extend({},this.activeState)},n.prototype.getZoom=function(){return this.activeState.zoom},n.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},n.prototype.computeRelativeZoom=function(i){return i/this.originalState.zoom},n.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},n.prototype.getCTM=function(){var i=this.options.svg.createSVGMatrix();return i.a=this.activeState.zoom,i.b=0,i.c=0,i.d=this.activeState.zoom,i.e=this.activeState.x,i.f=this.activeState.y,i},n.prototype.setCTM=function(i){var r=this.isZoomDifferent(i),s=this.isPanDifferent(i);if(r||s){if(r&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(i.a))===!1?(i.a=i.d=this.activeState.zoom,r=!1):(this.updateCache(i),this.options.onZoom(this.getRelativeZoom()))),s){var a=this.options.beforePan(this.getPan(),{x:i.e,y:i.f}),c=!1,u=!1;a===!1?(i.e=this.getPan().x,i.f=this.getPan().y,c=u=!0):e.isObject(a)&&(a.x===!1?(i.e=this.getPan().x,c=!0):e.isNumber(a.x)&&(i.e=a.x),a.y===!1?(i.f=this.getPan().y,u=!0):e.isNumber(a.y)&&(i.f=a.y)),c&&u||!this.isPanDifferent(i)?s=!1:(this.updateCache(i),this.options.onPan(this.getPan()))}(r||s)&&this.updateCTMOnNextFrame()}},n.prototype.isZoomDifferent=function(i){return this.activeState.zoom!==i.a},n.prototype.isPanDifferent=function(i){return this.activeState.x!==i.e||this.activeState.y!==i.f},n.prototype.updateCache=function(i){this.activeState.zoom=i.a,this.activeState.x=i.e,this.activeState.y=i.f},n.prototype.pendingUpdate=!1,n.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},n.prototype.updateCTM=function(){var i=this.getCTM();t.setCTM(this.viewport,i,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(i)},he=function(i,r){return new n(i,r)},he}var fe,dn;function ia(){if(dn)return fe;dn=1;var t=ta(),e=ea(),n=ke(),i=ze(),r=na(),s=function(o,h){this.init(o,h)},a={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},c={passive:!0};s.prototype.init=function(o,h){var f=this;this.svg=o,this.defs=o.querySelector("defs"),i.setupSvgAttributes(this.svg),this.options=n.extend(n.extend({},a),h),this.state="none";var p=i.getBoundingClientRectNormalized(o);this.width=p.width,this.height=p.height,this.viewport=r(i.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(g,d){if(f.viewport&&f.options.beforeZoom)return f.options.beforeZoom(g,d)},onZoom:function(g){if(f.viewport&&f.options.onZoom)return f.options.onZoom(g)},beforePan:function(g,d){if(f.viewport&&f.options.beforePan)return f.options.beforePan(g,d)},onPan:function(g){if(f.viewport&&f.options.onPan)return f.options.onPan(g)},onUpdatedCTM:function(g){if(f.viewport&&f.options.onUpdatedCTM)return f.options.onUpdatedCTM(g)}});var m=this.getPublicInstance();m.setBeforeZoom(this.options.beforeZoom),m.setOnZoom(this.options.onZoom),m.setBeforePan(this.options.beforePan),m.setOnPan(this.options.onPan),m.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&e.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},s.prototype.setupHandlers=function(){var o=this,h=null;if(this.eventListeners={mousedown:function(g){var d=o.handleMouseDown(g,h);return h=g,d},touchstart:function(g){var d=o.handleMouseDown(g,h);return h=g,d},mouseup:function(g){return o.handleMouseUp(g)},touchend:function(g){return o.handleMouseUp(g)},mousemove:function(g){return o.handleMouseMove(g)},touchmove:function(g){return o.handleMouseMove(g)},mouseleave:function(g){return o.handleMouseUp(g)},touchleave:function(g){return o.handleMouseUp(g)},touchcancel:function(g){return o.handleMouseUp(g)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var f=this.options.customEventsHandler.haltEventListeners;if(f&&f.length)for(var p=f.length-1;p>=0;p--)this.eventListeners.hasOwnProperty(f[p])&&delete this.eventListeners[f[p]]}for(var m in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(m,this.eventListeners[m],this.options.preventMouseEventsDefault?!1:c);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},s.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var o=this;this.wheelListener=function(f){return o.handleMouseWheel(f)};var h=!this.options.preventMouseEventsDefault;t.on(this.options.eventsListenerElement||this.svg,this.wheelListener,h),this.options.mouseWheelZoomEnabled=!0}},s.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var o=!this.options.preventMouseEventsDefault;t.off(this.options.eventsListenerElement||this.svg,this.wheelListener,o),this.options.mouseWheelZoomEnabled=!1}},s.prototype.handleMouseWheel=function(o){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(o.preventDefault?o.preventDefault():o.returnValue=!1);var h=o.deltaY||1,f=Date.now()-this.lastMouseWheelEventTime,p=3+Math.max(0,30-f);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in o&&o.deltaMode===0&&o.wheelDelta&&(h=o.deltaY===0?0:Math.abs(o.wheelDelta)/o.deltaY),h=-.3<h&&h<.3?h:(h>0?1:-1)*Math.log(Math.abs(h)+10)/p;var m=this.svg.getScreenCTM().inverse(),g=i.getEventPoint(o,this.svg).matrixTransform(m),d=Math.pow(1+this.options.zoomScaleSensitivity,-1*h);this.zoomAtPoint(d,g)}},s.prototype.zoomAtPoint=function(o,h,f){var p=this.viewport.getOriginalState();f?(o=Math.max(this.options.minZoom*p.zoom,Math.min(this.options.maxZoom*p.zoom,o)),o=o/this.getZoom()):this.getZoom()*o<this.options.minZoom*p.zoom?o=this.options.minZoom*p.zoom/this.getZoom():this.getZoom()*o>this.options.maxZoom*p.zoom&&(o=this.options.maxZoom*p.zoom/this.getZoom());var m=this.viewport.getCTM(),g=h.matrixTransform(m.inverse()),d=this.svg.createSVGMatrix().translate(g.x,g.y).scale(o).translate(-g.x,-g.y),w=m.multiply(d);w.a!==m.a&&this.viewport.setCTM(w)},s.prototype.zoom=function(o,h){this.zoomAtPoint(o,i.getSvgCenterPoint(this.svg,this.width,this.height),h)},s.prototype.publicZoom=function(o,h){h&&(o=this.computeFromRelativeZoom(o)),this.zoom(o,h)},s.prototype.publicZoomAtPoint=function(o,h,f){if(f&&(o=this.computeFromRelativeZoom(o)),n.getType(h)!=="SVGPoint")if("x"in h&&"y"in h)h=i.createSVGPoint(this.svg,h.x,h.y);else throw new Error("Given point is invalid");this.zoomAtPoint(o,h,f)},s.prototype.getZoom=function(){return this.viewport.getZoom()},s.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},s.prototype.computeFromRelativeZoom=function(o){return o*this.viewport.getOriginalState().zoom},s.prototype.resetZoom=function(){var o=this.viewport.getOriginalState();this.zoom(o.zoom,!0)},s.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},s.prototype.reset=function(){this.resetZoom(),this.resetPan()},s.prototype.handleDblClick=function(o){if(this.options.preventMouseEventsDefault&&(o.preventDefault?o.preventDefault():o.returnValue=!1),this.options.controlIconsEnabled){var h=o.target.getAttribute("class")||"";if(h.indexOf("svg-pan-zoom-control")>-1)return!1}var f;o.shiftKey?f=1/((1+this.options.zoomScaleSensitivity)*2):f=(1+this.options.zoomScaleSensitivity)*2;var p=i.getEventPoint(o,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(f,p)},s.prototype.handleMouseDown=function(o,h){this.options.preventMouseEventsDefault&&(o.preventDefault?o.preventDefault():o.returnValue=!1),n.mouseAndTouchNormalize(o,this.svg),this.options.dblClickZoomEnabled&&n.isDblClick(o,h)?this.handleDblClick(o):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=i.getEventPoint(o,this.svg).matrixTransform(this.firstEventCTM.inverse()))},s.prototype.handleMouseMove=function(o){if(this.options.preventMouseEventsDefault&&(o.preventDefault?o.preventDefault():o.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var h=i.getEventPoint(o,this.svg).matrixTransform(this.firstEventCTM.inverse()),f=this.firstEventCTM.translate(h.x-this.stateOrigin.x,h.y-this.stateOrigin.y);this.viewport.setCTM(f)}},s.prototype.handleMouseUp=function(o){this.options.preventMouseEventsDefault&&(o.preventDefault?o.preventDefault():o.returnValue=!1),this.state==="pan"&&(this.state="none")},s.prototype.fit=function(){var o=this.viewport.getViewBox(),h=Math.min(this.width/o.width,this.height/o.height);this.zoom(h,!0)},s.prototype.contain=function(){var o=this.viewport.getViewBox(),h=Math.max(this.width/o.width,this.height/o.height);this.zoom(h,!0)},s.prototype.center=function(){var o=this.viewport.getViewBox(),h=(this.width-(o.width+o.x*2)*this.getZoom())*.5,f=(this.height-(o.height+o.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:h,y:f})},s.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},s.prototype.pan=function(o){var h=this.viewport.getCTM();h.e=o.x,h.f=o.y,this.viewport.setCTM(h)},s.prototype.panBy=function(o){var h=this.viewport.getCTM();h.e+=o.x,h.f+=o.y,this.viewport.setCTM(h)},s.prototype.getPan=function(){var o=this.viewport.getState();return{x:o.x,y:o.y}},s.prototype.resize=function(){var o=i.getBoundingClientRectNormalized(this.svg);this.width=o.width,this.height=o.height;var h=this.viewport;h.options.width=this.width,h.options.height=this.height,h.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},s.prototype.destroy=function(){var o=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var h in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(h,this.eventListeners[h],this.options.preventMouseEventsDefault?!1:c);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),u=u.filter(function(f){return f.svg!==o.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},s.prototype.getPublicInstance=function(){var o=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return o.options.panEnabled=!0,o.pi},disablePan:function(){return o.options.panEnabled=!1,o.pi},isPanEnabled:function(){return!!o.options.panEnabled},pan:function(h){return o.pan(h),o.pi},panBy:function(h){return o.panBy(h),o.pi},getPan:function(){return o.getPan()},setBeforePan:function(h){return o.options.beforePan=h===null?null:n.proxy(h,o.publicInstance),o.pi},setOnPan:function(h){return o.options.onPan=h===null?null:n.proxy(h,o.publicInstance),o.pi},enableZoom:function(){return o.options.zoomEnabled=!0,o.pi},disableZoom:function(){return o.options.zoomEnabled=!1,o.pi},isZoomEnabled:function(){return!!o.options.zoomEnabled},enableControlIcons:function(){return o.options.controlIconsEnabled||(o.options.controlIconsEnabled=!0,e.enable(o)),o.pi},disableControlIcons:function(){return o.options.controlIconsEnabled&&(o.options.controlIconsEnabled=!1,e.disable(o)),o.pi},isControlIconsEnabled:function(){return!!o.options.controlIconsEnabled},enableDblClickZoom:function(){return o.options.dblClickZoomEnabled=!0,o.pi},disableDblClickZoom:function(){return o.options.dblClickZoomEnabled=!1,o.pi},isDblClickZoomEnabled:function(){return!!o.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return o.enableMouseWheelZoom(),o.pi},disableMouseWheelZoom:function(){return o.disableMouseWheelZoom(),o.pi},isMouseWheelZoomEnabled:function(){return!!o.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(h){return o.options.zoomScaleSensitivity=h,o.pi},setMinZoom:function(h){return o.options.minZoom=h,o.pi},setMaxZoom:function(h){return o.options.maxZoom=h,o.pi},setBeforeZoom:function(h){return o.options.beforeZoom=h===null?null:n.proxy(h,o.publicInstance),o.pi},setOnZoom:function(h){return o.options.onZoom=h===null?null:n.proxy(h,o.publicInstance),o.pi},zoom:function(h){return o.publicZoom(h,!0),o.pi},zoomBy:function(h){return o.publicZoom(h,!1),o.pi},zoomAtPoint:function(h,f){return o.publicZoomAtPoint(h,f,!0),o.pi},zoomAtPointBy:function(h,f){return o.publicZoomAtPoint(h,f,!1),o.pi},zoomIn:function(){return this.zoomBy(1+o.options.zoomScaleSensitivity),o.pi},zoomOut:function(){return this.zoomBy(1/(1+o.options.zoomScaleSensitivity)),o.pi},getZoom:function(){return o.getRelativeZoom()},setOnUpdatedCTM:function(h){return o.options.onUpdatedCTM=h===null?null:n.proxy(h,o.publicInstance),o.pi},resetZoom:function(){return o.resetZoom(),o.pi},resetPan:function(){return o.resetPan(),o.pi},reset:function(){return o.reset(),o.pi},fit:function(){return o.fit(),o.pi},contain:function(){return o.contain(),o.pi},center:function(){return o.center(),o.pi},updateBBox:function(){return o.updateBBox(),o.pi},resize:function(){return o.resize(),o.pi},getSizes:function(){return{width:o.width,height:o.height,realZoom:o.getZoom(),viewBox:o.viewport.getViewBox()}},destroy:function(){return o.destroy(),o.pi}}),this.publicInstance};var u=[],l=function(o,h){var f=n.getSvg(o);if(f===null)return null;for(var p=u.length-1;p>=0;p--)if(u[p].svg===f)return u[p].instance.getPublicInstance();return u.push({svg:f,instance:new s(f,h)}),u[u.length-1].instance.getPublicInstance()};return fe=l,fe}var ra=ia();const oa=js(ra),qn={"has part":"blue","part of":"blue",contains:"green","has role":"darkgreen","is about":"darkgrey","has participant":"darkblue"},Qt=11,Vt=14,sa=120,pn=12,aa=40,la=40;function ca(t,e,n){const i=e.split(/\s+/),r=[];let s="";const a=t.append("text").style("font-size",`${Qt}px`).style("visibility","hidden");for(const c of i){const u=s?`${s} ${c}`:c;a.text(u),a.node().getComputedTextLength()>n&&s?(r.push(s),s=c):s=u}return s&&r.push(s),a.remove(),r}function ua(t,e){const n=t.append("text").style("font-size",`${Qt}px`).style("visibility","hidden").text(e),i=n.node().getComputedTextLength();return n.remove(),i}function ha(t,e){const n=new Map;for(const i of e){const r=[i];for(;r.length>0;){const s=r.pop(),a=s.label||s.id,c=ca(t,a,sa),u=Math.max(...c.map(h=>ua(t,h))),l=Math.max(80,u+pn*2),o=Math.max(24,c.length*Vt+pn);n.set(s.id,{width:l,height:o,lines:c}),r.push(...s.children)}}return n}function fa(t,e){let n=0,i=0;e.forEach(c=>{n=Math.max(n,c.width),i=Math.max(i,c.height)});let r=20;const s=new Map,a=[];for(const c of t){const u=Ae(c);Us().nodeSize([n+aa,i+la]).separation((g,d)=>g.parent===d.parent?1:1.2)(u);let o=1/0,h=-1/0;u.each(g=>{o=Math.min(o,g.x),h=Math.max(h,g.x)});const f=h-o+n+20,p=r-o+n/2,m=50;a.push({root:u,offsetX:p,offsetY:m,treeWidth:f}),u.each(g=>{s.set(g.data.id,{x:g.x+p,y:g.y+m})}),r+=f+40}return{treeLayouts:a,nodePositions:s,maxNodeWidth:n,maxNodeHeight:i}}function da(t,e){t.append("marker").attr("id","arrow-hierarchy").attr("viewBox","0 -5 10 10").attr("refX",0).attr("refY",0).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#999");const n=new Set;for(const i of e){const r=i.label??i.type??"",s=qn[r]??i.color??"orange";n.add(s)}n.forEach(i=>{const r=i.replace(/[^a-zA-Z0-9]/g,"_");t.append("marker").attr("id",`arrow-${r}`).attr("viewBox","0 -5 10 10").attr("refX",8).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",i)})}function pa(t,e,n,i){for(const{root:r,offsetX:s,offsetY:a}of e)t.append("g").attr("class","tree-edges").attr("transform",`translate(${s}, ${a})`).selectAll(".link").data(r.links()).enter().append("path").attr("class","link").attr("data-source",u=>u.source.data.id).attr("data-target",u=>u.target.data.id).attr("d",u=>{const l=u.source,o=u.target,h=n.get(o.data.id),f=h?h.height/2:12,p=o.y-f-8,m=n.get(l.data.id),g=m?m.height/2:12,d=l.y+g;return`M${l.x},${d}C${l.x},${(d+p)/2} ${o.x},${(d+p)/2} ${o.x},${p}`}).attr("marker-end","url(#arrow-hierarchy)").on("mouseenter",function(u,l){i(l.source.data.id,l.target.data.id,this,"enter")}).on("mouseleave",function(u,l){i(l.source.data.id,l.target.data.id,this,"leave")}).on("click",function(u,l){i(l.source.data.id,l.target.data.id,this,"click")}).each(function(u){V(this).append("title").text("subclass of")})}function ga(t,e,n,i,r,s){for(const a of e){const c=n.get(a.source),u=n.get(a.target);if(!c||!u)continue;const l=a.label||a.type||"",o=qn[l]||a.color||"orange",h=o.replace(/[^a-zA-Z0-9]/g,"_"),f=i.get(a.source),p=i.get(a.target),m=f?f.width/2:40,g=p?p.width/2:40,d=f?f.height/2:12,w=p?p.height/2:12,_=u.x-c.x,b=u.y-c.y,S=Math.sqrt(_*_+b*b);if(S===0)continue;const T=Math.atan2(b,_),N=Math.abs(Math.cos(T))>Math.abs(Math.sin(T));let X,Z;N?(X=c.x+(_>0?m:-m),Z=c.y+b/S*d*.5):(X=c.x+_/S*m*.5,Z=c.y+(b>0?d:-d));let L,j;N?(L=u.x+(_>0?-g:g),j=u.y-b/S*w*.5):(L=u.x-_/S*g*.5,j=u.y+(b>0?-w:w));const tt=(X+L)/2,ut=(Z+j)/2,gt=Math.min(30,S*.2),et=S>0?-b/S*gt:0,kt=S>0?_/S*gt:0,zt=`M${X},${Z} Q${tt+et},${ut+kt} ${L},${j}`,x=a.source,v=a.target;t.append("path").attr("class","relation-link").attr("data-source",x).attr("data-target",v).attr("d",zt).style("fill","none").style("stroke",o).style("stroke-width","1.5px").style("stroke-dasharray","4,2").style("stroke-opacity",.8).attr("marker-end",`url(#arrow-${h})`).on("mouseenter",function(){s(x,v,this,"enter")}).on("mouseleave",function(){s(x,v,this,"leave")}).on("click",function(){s(x,v,this,"click")}).append("title").text(`'${r[a.source]}' ${l} '${r[a.target]}'`||"relation"),l&&t.append("text").attr("class","relation-edge-label").attr("data-source",x).attr("data-target",v).attr("x",tt+et).attr("y",ut+kt-4).attr("text-anchor","middle").style("font-size","9px").style("fill",o).style("font-style","italic").style("cursor","pointer").text(l).on("mouseenter",function(){s(x,v,this,"enter")}).on("mouseleave",function(){s(x,v,this,"leave")}).on("click",function(){s(x,v,this,"click")})}}function ma(t){const e=(t.data.ose_curation??Ft.EXTERNAL).toLowerCase().replace(/\s+/g,"_");return["node",`ose-source-${t.data.ose_source}`,`ose-curation-status-${e}`,...t.data.ose_selected?["ose-selected"]:[]]}function va(t,e,n,i,r){for(const{root:s,offsetX:a,offsetY:c}of e){const l=t.append("g").attr("class","tree-nodes").attr("transform",`translate(${a}, ${c})`).selectAll(".node").data(s.descendants()).enter().append("g").attr("class",o=>ma(o).join(" ")).attr("data-node-id",o=>o.data.id).attr("transform",o=>`translate(${o.x},${o.y})`).on("mouseenter",function(o,h){i(h.data.id,this,"enter")}).on("mouseleave",function(o,h){i(h.data.id,this,"leave")}).on("dblclick",function(o,h){r(h.data)});l.append("rect").attr("x",o=>{const h=n.get(o.data.id);return h?-h.width/2:-40}).attr("y",o=>{const h=n.get(o.data.id);return h?-h.height/2:-12}).attr("width",o=>{const h=n.get(o.data.id);return h?h.width:80}).attr("height",o=>{const h=n.get(o.data.id);return h?h.height:24}).attr("rx",4).attr("ry",4).style("fill","#fff").style("stroke","#999").style("stroke-width","1px"),l.each(function(o){const h=n.get(o.data.id);if(!h)return;const f=V(this).append("text").attr("text-anchor","middle").style("font-size",`${Qt}px`).style("fill","#333"),p=h.lines,g=-(p.length*Vt)/2+Vt/2;p.forEach((d,w)=>{f.append("tspan").attr("x",0).attr("dy",w===0?`${g+Qt*.35}px`:`${Vt}px`).text(d)}),f.append("title").text(`${o.data.label}
${o.data.id}`)})}}function wa(t,e){const n=oa(t,{zoomEnabled:!0,controlIconsEnabled:!0,dblClickZoomEnabled:!1,contain:!0,center:!0,zoomScaleSensitivity:.3,minZoom:.01,maxZoom:100});return e&&(n.zoom(e.zoom),n.pan(e.pan)),n}function ya(t,e,n,i,r){const s=new _e,a=e.filter(d=>d.startsWith("REL "));console.debug("Relation columns found:",a);const c=t.map((d,w)=>{var X;const _=d.ID.trim(),b=d.Label.trim(),S=((X=Object.entries(d).find(([Z,L])=>Z.toLowerCase().includes("curation status")))==null?void 0:X[1].trim())||Ft.PRE_PROPOSED,T=[{label:d.Parent.trim(),id:void 0}],N=[];for(const Z of a){const L=d[Z];if(L&&typeof L=="string"){const j=L.split(";").map(tt=>tt.trim()).filter(Boolean);for(const tt of j)N.push({relation:{label:Z.replace(/REL '([^']+)'.*/,"$1")},target:{label:tt}})}}return{id:_,label:b,curationStatus:S,origin:n,subClassOf:T,relations:N,index:w}}).filter(d=>d.id),u=new Map;for(const d of c)u.set(d.label,{...d,source:"current"});for(const d of i.dependencies)u.has(d.label)||u.set(d.label,{...d,source:"dependencies"});for(const d of i.derived)u.has(d.label)||u.set(d.label,{...d,source:"derived"});for(const d of c)for(const w of d.subClassOf){const _=u.get(w.label);_?w.id=_.id:w.id===void 0&&console.warn(`Parent term with label "${w.label}" not found for term "${d.label} [${d.id}]"`)}const l=new Map;for(const d of u.values()){const w=d.subClassOf.filter(_=>_.id===void 0);w.length>0&&console.warn(`Term "${d.label} [${d.id}]" has unresolved parents:`,w),d.subClassOf=d.subClassOf.filter(_=>_.id!==void 0),l.set(d.id,d)}for(const[d,w]of l){const _=d.replace(":","_"),b=w.origin||"<unknown>",S=w.curationStatus||"External",T={id:_,label:w.label,class:`ose-curation-status-${S.toLowerCase().replace(/\s+/g,"_")}`,curationStatus:S,origin:b,source:w.source,isSelected:(r==null?void 0:r.includes(w.index))===!0,visualDepth:-1/0};s.addNode(T)}for(const[d,w]of l){const _=d.replace(":","_");for(const b of w.subClassOf){const S=b.id.replace(":","_");l.has(b.id)||console.warn(`Parent term with label "${b.label}" not found for term "${w.label} [${w.id}]"`),s.addEdge({source:S,target:_,type:"subclass_of"})}}for(const[d,w]of l){const _=d.replace(":","_");for(const b of w.relations){const S=u.get(b.target.label);if(!S){console.warn(`Relation target term with label "${b.target.label}" not found for term "${w.label} [${w.id}]"`);continue}const T=S.id.replace(":","_"),N=_a(b.relation.label);s.addEdge({source:_,target:T,type:b.relation.label,label:b.relation.label,color:N})}}console.debug(`Built graph with ${s.nodes.length} nodes and ${s.edges.length} edges from ${c.length} current terms, ${i.dependencies.length} dependencies, and ${i.derived.length} derived terms.`,{edges:s.edges,nodes:s.nodes,allTerms:l});const o=new Set(Array.from(l.entries()).filter(([d,w])=>w.source==="current").map(([d,w])=>d.replace(":","_"))),h=new Set(Array.from(l.entries()).filter(([d,w])=>w.source==="derived").map(([d,w])=>d.replace(":","_"))),f=new Set(Array.from(l.entries()).filter(([d,w])=>w.source==="dependencies").map(([d,w])=>d.replace(":","_")));function p(d){if(o.has(d))return!0;const w=s.successors(d);for(const _ of w)if(p(_.id))return!0;return!1}function m(d){if(o.has(d))return!0;const w=s.predecessors(d);for(const _ of w)if(m(_.id))return!0;return!1}function g(d){return o.has(d)?!0:h.has(d)?m(d):f.has(d)?p(d):!1}for(const d of s.nodes)g(d.id)||s.removeNode(d.id);if(xa(s),console.log({graph:s.clone()}),r&&r.length>0){const d=new Set(s.nodes.filter(w=>w.isSelected).map(w=>w.id));ba(s,d);for(const w of s.nodes)d.has(w.id)||s.removeNode(w.id)}return s}function _a(t){return(t?{"has part":"blue","part of":"blue",contains:"green","has role":"darkgreen","is about":"darkgrey","has participant":"darkblue"}[t]:null)??"orange"}function xa(t){const e=new Map;function n(i){if(e.has(i.id))return e.get(i.id);if(!i)return console.error("Node not found for ID:",i),-1/0;const r=t.predecessors(i),s=t.successors(i),a=i.source!=="dependencies";let c;if(!a&&s.find(u=>u.source!=="dependencies"))c=0;else{const u=r.reduce((l,o)=>Math.max(l,n(o)),-1);a?c=u+1:c=u}return e.set(i.id,c),c}for(const i of t.nodes)i.visualDepth=n(i)}function ba(t,e){const n=(i,r)=>{if(e.has(i.id))return!0;const a=(r==="up"?t.predecessors.bind(t):t.successors.bind(t))(i.id).reduce((c,u)=>n(u,r)||c,!1);return a&&e.add(i.id),a};for(const i of t.leaves)n(i,"up");for(const i of t.roots)n(i,"down")}const Sa={class:"visualise-container"},Ca={class:"header"},Ea={class:"header-title-row"},Ma={class:"title-with-help"},Na={class:"mb-0"},Aa={class:"text-muted"},ka={class:"search-bar"},za={class:"search-info text-muted"},Pa={class:"input-group input-group-sm"},$a=["disabled"],Ta=["disabled"],Za=["disabled"],La=["disabled"],Da=["disabled"],Ba={class:"filters-card"},Ia={class:"filter-section"},Ra={class:"filter-controls"},Oa={class:"form-check form-switch"},qa=["disabled"],Va={class:"form-check form-switch"},Fa=["disabled"],Ha={class:"filter-section"},Xa={class:"filter-controls"},Ua={class:"range-control"},Wa={class:"range-header"},Ya={for:"range_num_child_levels",class:"form-label"},Ga={class:"range-minmax"},Ka=["max","disabled"],Qa={class:"filter-section"},Ja={class:"filter-controls"},ja={class:"dropdown"},tl=["disabled"],el={class:"dropdown-menu dropdown-menu-end"},nl=["onClick"],il={key:0,class:"loading-overlay"},rl={key:1,class:"error-overlay"},ol={class:"error-message"},sl={key:2,class:"empty-state-overlay"},al={class:"modal fade",id:"legendModal",tabindex:"-1","aria-labelledby":"legendModalLabel","aria-hidden":"true"},ll={class:"modal-dialog modal-lg"},cl={class:"modal-content"},ul={class:"modal-body"},hl={class:"legend-grid"},fl={class:"legend-item full-width"},dl={class:"status-grid"},pl=Gn({__name:"Visualise",setup(t){var zt;const e=URLS.prefix,n=O(((zt=window.ose)==null?void 0:zt.visualise)??null);window.oseDataChanged=()=>{var v,M,D,C;console.debug("Visualisation data updated in window.ose",(v=window.ose)==null?void 0:v.visualise),n.value=((M=window.ose)==null?void 0:M.visualise)??null;const x=(D=n.value)==null?void 0:D.sheetData;console.debug("Sheet data after update:",{hasSheetData:!!x,repo_name:x==null?void 0:x.repo_name,folder:x==null?void 0:x.folder,spreadsheet_name:x==null?void 0:x.spreadsheet_name,rowCount:((C=x==null?void 0:x.rows)==null?void 0:C.length)||0,header:x==null?void 0:x.header})};const i=Kn("svgContainer"),r=it(()=>{var x;return((x=n.value)==null?void 0:x.sheetData)??{rows:[],header:[],file_sha:"",repo_name:"",folder:"",spreadsheet_name:""}}),s=it(()=>`${r.value.folder}/${r.value.spreadsheet_name}`),a=O(!1),c=O(null),u=it(()=>Object.values(Ft)),l=O(null),o=it(()=>{var x;return((x=l.value)==null?void 0:x.nodes.reduce((v,M)=>({[M.id]:M.label,...v}),{}))??{}}),h=O(Object.values(Ft)),f=O(!0),p=O(!0),m=O(null),g=it(()=>l.value?Math.max(...l.value.nodes.map(x=>x.visualDepth??0),1):1);let d=null;const w=O(""),_=O([]),b=O(-1),S=it(()=>_.value.length>0),T=it(()=>w.value.trim()?_.value.length===0?"No matches":`${b.value+1} / ${_.value.length}`:""),N=it(()=>!l.value||a.value);function X(){const x=Gs(w.value,o.value);_.value=x,x.length>0?(b.value=0,Z(),setTimeout(()=>L(),50)):b.value=-1}function Z(){if(b.value>=0&&b.value<_.value.length){const x=_.value[b.value];Ks(x)}}function L(){if(!d||b.value<0||!i.value)return;const x=_.value[b.value];Js(x,i.value,d)}function j(){_.value.length!==0&&(b.value=(b.value+1)%_.value.length,Z(),setTimeout(()=>L(),0))}function tt(){_.value.length!==0&&(b.value=(b.value-1+_.value.length)%_.value.length,Z(),setTimeout(()=>L(),0))}function ut(){w.value="",_.value=[],b.value=-1,Qs()}async function gt(){var x;if(!r.value.repo_name||!r.value.folder||!r.value.spreadsheet_name){console.warn("Cannot fetch graph: missing repo, folder, or spreadsheet name",{repo:r.value.repo_name,folder:r.value.folder,spreadsheet:r.value.spreadsheet_name});return}if(r.value.rows.length===0){console.warn("Cannot fetch graph: no rows in spreadsheet");return}console.debug("Fetching graph dependencies...",{repo:r.value.repo_name,folder:r.value.folder,spreadsheet:r.value.spreadsheet_name,rowCount:r.value.rows.length}),a.value=!0,c.value=null;try{const v=await fetch(`${e}/api/visualise/dependencies/${r.value.repo_name}/${r.value.folder}/${r.value.spreadsheet_name}`);if(!v.ok)throw new Error(`Server error: ${v.status} ${v.statusText}`);const M=await v.json();if(!M.success)throw new Error(M.error||"Failed to load dependencies");console.debug("Dependencies loaded successfully",M.data),d==null||d.destroy(),d=null,ut();const D=M.data,C=(x=n.value)!=null&&x.selection&&n.value.selection.length>0?n.value.selection:void 0;l.value=ya(r.value.rows,r.value.header,r.value.spreadsheet_name,D,C),m.value=Math.min(3,g.value),console.debug("Graph built successfully",{nodes:l.value.nodes.length,edges:l.value.edges.length})}catch(v){c.value=v instanceof Error?v.message:"An unexpected error occurred",console.error("Failed to fetch dependencies:",v)}finally{a.value=!1}}function et(){var De,Be,Ie,Re,Oe;if(!l.value||!i.value){console.warn("Cannot render graph:",{hasGraph:!!l.value,hasContainer:!!i.value});return}console.debug("Rendering graph...",{nodes:l.value.nodes.length,edges:l.value.edges.length});const x=l.value.clone(),v={curationFilter:h.value,showChildrenFromOtherSheets:f.value,showParentsFromOtherSheets:p.value,numChildLevels:m.value,currentSheet:(Be=(De=n==null?void 0:n.value)==null?void 0:De.sheetData)==null?void 0:Be.spreadsheet_name},{nodes:M,hierarchyEdges:D,relationEdges:C}=Ws(x,v);console.debug("After filtering:",{nodes:M.length,hierarchyEdges:D.length,relationEdges:C.length});const Pt=Ys(M,D);console.debug("Built trees:",Pt.length);let ee=null;if(d)try{ee={zoom:d.getZoom(),pan:d.getPan()},d.destroy(),d=null}catch{}(Ie=i.value.querySelector("svg"))==null||Ie.remove();const ht=i.value.getBoundingClientRect(),Vn=ht.width||800,Fn=ht.height||600,I=V(i.value).append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${Vn} ${Fn}`),ne=I.append("g").attr("class","graph-container"),$t=ha(I,Pt),{treeLayouts:$e,nodePositions:Hn}=fa(Pt,$t),Te=ne.append("g").attr("class","edges-layer"),Xn=ne.append("g").attr("class","nodes-layer"),Un=I.append("defs");da(Un,C);let R=null;function Wn(E,z,U){U==="enter"?(V(z).classed("node-hovered",!0),I.selectAll(".link, .relation-link").each(function(){const A=V(this),P=A.attr("data-source"),B=A.attr("data-target");(P===E||B===E)&&(A.classed("connected",!0),P!==E&&I.select(`.node[data-node-id="${P}"]`).classed("node-connected",!0),B!==E&&I.select(`.node[data-node-id="${B}"]`).classed("node-connected",!0))})):U==="leave"&&(V(z).classed("node-hovered",!1),I.selectAll(".link, .relation-link").classed("connected",!1),I.selectAll(".node").classed("node-connected",!1))}function Ze(E,z,U,A){function P(nt){I.selectAll(".node").each(function(){const mt=V(this),W=mt.attr("data-node-id");(W===E||W===z)&&mt.classed("edge-connected",nt)})}function B(nt,mt){I.selectAll(".link, .relation-link").each(function(){const W=V(this);W.attr("data-source")===E&&W.attr("data-target")===z&&W.classed(mt,nt)}),I.selectAll(".relation-edge-label").each(function(){const W=V(this);W.attr("data-source")===E&&W.attr("data-target")===z&&W.classed(mt,nt)})}A==="click"?(R==null?void 0:R.sourceId)===E&&(R==null?void 0:R.targetId)===z?(P(!1),B(!1,"focused"),R=null):(R&&(I.selectAll(".node").classed("edge-connected",!1),B(!1,"focused")),R={sourceId:E,targetId:z,element:U},P(!0),B(!0,"focused")):A==="enter"&&!R?(P(!0),B(!0,"highlighted")):A==="leave"&&!R&&(P(!1),B(!1,"highlighted"))}function Yn(E){var nt;if(((nt=E.ose_curation)==null?void 0:nt.toLowerCase())==="external")return;const z=window.opener,U=r.value.repo_name,A=E.ose_source==="current"?s.value:E.ose_origin,P=E.id;if(!z||!U||!A||!P){console.warn("Cannot navigate to term: missing data",{editorWindow:z,repo:U,originSheet:A,nodeId:P});return}const B={type:"navigateToTerm",repo:U,sheet:A,termID:P};z.postMessage(B,"*")}pa(Te,$e,$t,Ze),ga(Te,C,Hn,$t,o.value,Ze),va(Xn,$e,$t,Wn,Yn);const Le=(Re=i.value)==null?void 0:Re.querySelector("svg");if(Le){d=wa(Le,ee);const E=(Oe=ne.node())==null?void 0:Oe.getBBox();if(E&&d&&!ee){const z=ht.width/E.width,U=ht.height/E.height,A=Math.min(z,U,1);d.zoom(A);const P=(ht.width-E.width*A)/2-E.x*A,B=(ht.height-E.height*A)/2-E.y*A;d.pan({x:P,y:B})}}}function kt(x){const v=h.value.indexOf(x);v>=0?h.value.splice(v,1):h.value.push(x),et()}return Qn(()=>{l.value&&i.value&&et()}),Jn(()=>{console.debug("watchEffect triggered:",{rowsLength:r.value.rows.length,repo_name:r.value.repo_name,folder:r.value.folder,spreadsheet_name:r.value.spreadsheet_name,allConditionsMet:r.value.rows.length>0&&!!r.value.repo_name&&!!r.value.folder&&!!r.value.spreadsheet_name}),r.value.rows.length>0&&r.value.repo_name&&r.value.folder&&r.value.spreadsheet_name&&gt()}),Tt(m,(x,v)=>{x!==v&&x!==null&&v!==null&&et()}),Tt(f,(x,v)=>{x!==v&&et()}),Tt(p,(x,v)=>{x!==v&&et()}),Tt(a,(x,v)=>{var M,D;x&&v===!1&&((D=(M=i.value)==null?void 0:M.querySelector("svg"))==null||D.remove(),ut())}),jn(async()=>{i.value&&(i.value.style.minHeight=window.innerHeight-i.value.offsetTop-16+"px")}),(x,v)=>{var M,D;return ot(),rt("div",Sa,[y("div",Ca,[y("div",Ea,[y("div",Ma,[y("h5",Na,[v[4]||(v[4]=q(" Hierarchy Tree ")),y("small",Aa,K((D=(M=n.value)==null?void 0:M.sheetData)==null?void 0:D.spreadsheet_name),1)]),v[5]||(v[5]=y("button",{class:"btn btn-sm btn-link text-secondary p-0 ms-2",type:"button","data-bs-toggle":"modal","data-bs-target":"#legendModal",title:"Help & Legend"},[y("i",{class:"fa-solid fa-circle-question"})],-1))]),y("div",ka,[y("small",za,K(T.value),1),y("div",Pa,[Zt(y("input",{type:"text",class:"form-control",placeholder:"Search classes...","onUpdate:modelValue":v[0]||(v[0]=C=>w.value=C),onKeyup:ti(X,["enter"]),disabled:N.value},null,40,$a),[[qe,w.value]]),y("button",{class:"btn btn-outline-secondary",type:"button",onClick:X,title:"Search",disabled:N.value},v[6]||(v[6]=[y("i",{class:"fa-solid fa-search"},null,-1)]),8,Ta),y("button",{class:"btn btn-outline-secondary",type:"button",onClick:tt,disabled:!S.value||N.value,title:"Previous match"},v[7]||(v[7]=[y("i",{class:"fa-solid fa-chevron-up"},null,-1)]),8,Za),y("button",{class:"btn btn-outline-secondary",type:"button",onClick:j,disabled:!S.value||N.value,title:"Next match"},v[8]||(v[8]=[y("i",{class:"fa-solid fa-chevron-down"},null,-1)]),8,La),y("button",{class:"btn btn-outline-secondary",type:"button",onClick:ut,disabled:!w.value||N.value,title:"Clear search"},v[9]||(v[9]=[y("i",{class:"fa-solid fa-times"},null,-1)]),8,Da)])])]),y("div",Ba,[y("div",Ia,[v[12]||(v[12]=y("span",{class:"filter-section-title"},[y("i",{class:"fa-solid fa-filter"}),q(" From other sheets ")],-1)),y("div",Ra,[y("div",Oa,[Zt(y("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"ckb_children_other_sheets","onUpdate:modelValue":v[1]||(v[1]=C=>f.value=C),disabled:N.value},null,8,qa),[[Ve,f.value]]),v[10]||(v[10]=y("label",{class:"form-check-label",for:"ckb_children_other_sheets"},[y("i",{class:"fa-solid fa-arrow-down"}),q(" Children ")],-1))]),y("div",Va,[Zt(y("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"ckb_parents_other_sheets","onUpdate:modelValue":v[2]||(v[2]=C=>p.value=C),disabled:N.value},null,8,Fa),[[Ve,p.value]]),v[11]||(v[11]=y("label",{class:"form-check-label",for:"ckb_parents_other_sheets"},[y("i",{class:"fa-solid fa-arrow-up"}),q(" Parents ")],-1))])])]),y("div",Ha,[v[14]||(v[14]=y("span",{class:"filter-section-title"},[y("i",{class:"fa-solid fa-layer-group"}),q(" Child Levels ")],-1)),y("div",Xa,[y("div",Ua,[y("div",Wa,[y("label",Ya,[v[13]||(v[13]=q(" Depth: ")),y("strong",null,K(m.value||"All"),1)]),y("span",Ga,"1"+K(g.value),1)]),Zt(y("input",{type:"range",class:"form-range","onUpdate:modelValue":v[3]||(v[3]=C=>m.value=C),min:"1",max:g.value,step:"1",id:"range_num_child_levels",disabled:N.value},null,8,Ka),[[qe,m.value]])])])]),y("div",Qa,[v[16]||(v[16]=y("span",{class:"filter-section-title"},[y("i",{class:"fa-solid fa-tags"}),q(" Curation Status ")],-1)),y("div",Ja,[y("div",ja,[y("button",{class:"btn btn-sm btn-outline-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:N.value},[v[15]||(v[15]=y("i",{class:"fa-solid fa-filter"},null,-1)),q(" "+K(h.value.length)+"/"+K(u.value.length)+" selected ",1)],8,tl),y("ul",el,[(ot(!0),rt(Fe,null,He(u.value,C=>(ot(),rt("li",{key:C},[y("a",{class:ie(["dropdown-item","ose-curation-status-"+C.toLowerCase().replace(" ","_")]),href:"#",onClick:Pt=>kt(C)},[y("i",{class:ie(["fa-solid",h.value.indexOf(C)>=0?"fa-circle-check":"fa-circle"])},null,2),q(" "+K(C),1)],10,nl)]))),128))])])])])])]),y("div",{ref_key:"svgContainer",ref:i,class:"svg-container"},[a.value?(ot(),rt("div",il,v[17]||(v[17]=[y("div",{class:"spinner"},null,-1),y("span",null,"Loading visualisation...",-1)]))):c.value?(ot(),rt("div",rl,[v[18]||(v[18]=y("i",{class:"fa-solid fa-circle-exclamation"},null,-1)),v[19]||(v[19]=y("span",{class:"error-title"},"Failed to load visualisation",-1)),y("span",ol,K(c.value),1),y("button",{class:"btn btn-primary btn-sm",onClick:gt},"Try again")])):l.value?ei("",!0):(ot(),rt("div",sl,v[20]||(v[20]=[y("i",{class:"fa-solid fa-diagram-project"},null,-1),y("span",{class:"empty-state-title"},"No Visualisation Loaded",-1),y("span",{class:"empty-state-message"},'To see a visualisation, open a spreadsheet from the editor and click the "Visualise" button in the toolbar.',-1)])))],512),y("div",al,[y("div",ll,[y("div",cl,[v[23]||(v[23]=y("div",{class:"modal-header"},[y("h5",{class:"modal-title",id:"legendModalLabel"},[y("i",{class:"fa-solid fa-circle-info"}),q(" Help & Legend ")]),y("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),y("div",ul,[y("div",hl,[v[22]||(v[22]=ni('<div class="legend-item"><h6><i class="fa-solid fa-circle-question"></i> How to Use</h6><ul><li><strong>Pan:</strong> Click and drag the background</li><li><strong>Zoom:</strong> Use mouse wheel or pinch gesture</li><li><strong>Search:</strong> Find specific classes using the search bar</li><li><strong>Children/Parents Switches:</strong> Toggle whether to include children or parents from other sheets</li><li><strong>Child Levels Slider:</strong> Adjust how many levels of child classes to display</li><li><strong>Curation Status Filter:</strong> Select which curation statuses to display</li><li><strong>Hover on nodes/edges:</strong> Highlight related nodes and edges</li><li><strong>Click on edges:</strong> Keep the edge highlighted</li></ul></div><div class="legend-item"><h6><i class="fa-solid fa-circle-nodes"></i> Node Types</h6><div class="node-examples"><div class="node-example"><div class="example-node node-current">Current Sheet</div><div class="example-node node-current node-selected">Selected Term</div><span class="example-desc">Terms from the current spreadsheet (regular border, selected bold)</span></div><div class="node-example"><div class="example-node node-dependencies">Dependencies</div><span class="example-desc">External terms or terms from other sheets referenced by current terms (dashed border)</span></div><div class="node-example"><div class="example-node node-derived">Derived</div><span class="example-desc">Child terms from other sheets (italic text)</span></div></div></div><div class="legend-item"><h6><i class="fa-solid fa-arrow-right"></i> Edge Types</h6><ul><li><strong>Subclass Of:</strong> Solid black arrows showing hierarchy (parent  child)</li><li><strong>Relations:</strong> Colored arrows showing other relationships (e.g., &quot;has part&quot;, &quot;part of&quot;)</li></ul></div>',3)),y("div",fl,[v[21]||(v[21]=y("h6",null,[y("i",{class:"fa-solid fa-palette"}),q(" Curation Status Colors")],-1)),y("div",dl,[(ot(!0),rt(Fe,null,He(u.value,C=>(ot(),rt("span",{key:C,class:ie(["status-badge","ose-curation-status-"+C.toLowerCase().replace(" ","_")])},K(C),3))),128))])])])]),v[24]||(v[24]=y("div",{class:"modal-footer"},[y("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])}}}),Pe=ii(pl);Pe.config.globalProperties.$filters=ri;Pe.use(oi());Pe.mount("#vue-app-visualise");
//# sourceMappingURL=visualise.js.map
