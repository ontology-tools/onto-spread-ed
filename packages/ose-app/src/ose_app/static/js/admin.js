import{d as y,r as m,o as _,c as r,a as c,b as $,e,u as C,f as S,F as b,g as k,h as B,t as T,i as d,j as P,$ as R}from"./chunks/filter-CdAXK93b.js";import{p as j}from"./chunks/bootbox-D3SJ_Fwv.js";import"./chunks/index-sLCKmIWG-B5BYNF2N.js";import{u as A,_ as E,B as N}from"./chunks/BToastOrchestrator.vue_vue_type_style_index_0_lang-DKAZyKKr-DTksKjtf.js";const V={class:"row align-stretch"},D={class:"col-sm-6 col-md-4 col-lg-3 m-2"},F=["href"],L={class:"col-sm-6 col-md-4 col-lg-3 m-2"},O=["href"],U={class:"col-sm-6 col-md-4 col-lg-3 m-2"},G={key:0,class:"col-sm-6 col-md-4 col-lg-3 m-2"},H=["href"],I={class:"row align-stretch"},J={class:"dropdown m-2"},M={class:"dropdown-menu"},q=["onClick"],z=y({__name:"Dashboard",setup(K){const p=URLS.prefix,{show:u}=A();async function v(a){const t=h.value[a].arguments,l=[];if((t==null?void 0:t.length)>0)for(const o of t){const g=await j({title:o.description,value:o.default,inputType:"text"});if(g===null)return;l.push(g)}const n=bootbox.dialog({message:'<i class="fa fa-spin fa-spinner"></i> Script is being executed',closeButton:!1});let f=new Promise((o,g)=>{n.on("shown.bs.modal",()=>o())});try{const o=await(await fetch(`${p}/api/scripts/${a}/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({args:l})})).json();await f,n.modal("hide"),bootbox.dialog({title:o.success?"Success":"Error",message:o.result??o.error})}catch(o){await f,n.modal("hide"),bootbox.dialog({message:`<p>An error occurred</p><p>${o}</p>`,title:"Error"})}}async function w(){const a=bootbox.dialog({message:'<i class="fa fa-spin fa-spinner"></i> Clearing caches',closeButton:!1});let s=new Promise((t,l)=>{a.on("shown.bs.modal",()=>t())});try{await fetch(`${p}/api/settings/clear_caches`,{method:"POST",headers:{"Content-Type":"application/json"}}),await s,a.modal("hide"),u==null||u({props:{value:5e3,progressProps:{variant:"success"}},component:d(N,{variant:"success"},{default:()=>d("div",{style:"display: flex; align-items: center; gap: 16px"},[d("i",{class:"fa fa-check"}),d("span",null,"Caches cleared!")])})})}catch(t){await s,a.modal("hide"),bootbox.dialog({message:`<p>An error occurred</p><p>${t}</p>`,title:"Error"})}}const i=m(URLS),h=m(null);return _(async()=>{h.value=(await(await fetch(`${p}/api/scripts`)).json()).result}),(a,s)=>(c(),r(b,null,[$(C(E)),e("div",V,[e("div",D,[e("a",{href:i.value.release,class:"card bg-light",style:{height:"100%","text-decoration":"none","border-width":"2px 2px 4px 2px"}},s[1]||(s[1]=[e("div",{class:"section p-5 text-center fs-2 bg-light"},[e("i",{class:"fas fa-upload"})],-1),e("div",{class:"card-body"},[e("h4",null,"Release"),e("p",null," Start the release process and release a new version of ontologies ")],-1)]),8,F)]),e("div",L,[e("a",{href:i.value.rebuildIndex,class:"card bg-light",style:{height:"100%","text-decoration":"none","border-width":"2px 2px 4px 2px"}},s[2]||(s[2]=[e("div",{class:"section p-5 text-center fs-2 bg-light"},[e("i",{class:"fas fa-folder-open"})],-1),e("div",{class:"card-body"},[e("h4",null,"Rebuild index"),e("p",null," Force a complete rebuild of the index to ensure the search finds all entries. ")],-1)]),8,O)]),e("div",U,[e("a",{class:"card bg-light",href:"#",style:{height:"100%","text-decoration":"none","border-width":"2px 2px 4px 2px"},onClick:s[0]||(s[0]=t=>w())},s[3]||(s[3]=[e("div",{class:"section p-5 text-center fs-2 bg-light"},[e("i",{class:"fas fa-gauge-high"})],-1),e("div",{class:"card-body"},[e("h4",null,"Clear caches"),e("p",null," Clear cached files loaded from GitHub to ensure the latest version is used. ")],-1)]))]),"settings"in i.value?(c(),r("div",G,[e("a",{href:i.value.settings,class:"card bg-light",style:{height:"100%","text-decoration":"none","border-width":"2px 2px 4px 2px"}},s[4]||(s[4]=[e("div",{class:"section p-5 text-center fs-2 bg-light"},[e("i",{class:"fa-solid fa-gear"})],-1),e("div",{class:"card-body"},[e("h4",null,"Repositories"),e("p",null," Add, remove, or edit repositories available on the editor. ")],-1)]),8,H)])):S("",!0)]),e("div",I,[e("div",J,[s[6]||(s[6]=e("button",{"aria-expanded":"false",class:"btn btn-danger dropdown-toggle","data-bs-toggle":"dropdown",type:"button"}," Run a script ",-1)),e("ul",M,[(c(!0),r(b,null,k(h.value,(t,l)=>(c(),r("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:n=>v(l)},[s[5]||(s[5]=e("i",{class:"fa-regular fa-circle-play text-success"},null,-1)),B(" "+T(t.title),1)],8,q)]))),256))])])])],64))}}),x=P(z);x.config.globalProperties.$filters=R;x.mount("#vue-app-dashboard");
//# sourceMappingURL=admin.js.map
